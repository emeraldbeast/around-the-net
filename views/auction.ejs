<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Auction</title>
    <link rel="icon" href="/images/around-the-net-logo.png" type="image/png">
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="/_vercel/insights/script.js"></script>
    <script>
        window.addEventListener('load', () => {
            const loader = document.getElementById('page-loader');
            if (loader) loader.classList.add('opacity-0', 'pointer-events-none');
            const video = document.getElementById('tt-video');
            if (video) video.playbackRate = 0.5;
        });
    </script>
</head>

<body class="bg-cyan-900">
    <div id="page-loader"
        class="fixed inset-0 bg-white z-[100] flex items-center justify-center transition-opacity duration-[2000ms]">
        <video id="tt-video" autoplay muted loop playsinline class="w-[500px] h-[500px]">
            <source src="/animations/tt-loader.mp4" type="video/mp4" />
            Your browser does not support the video tag.
        </video>
    </div>
    <div id="top" class="header sticky top-0 z-50 bg-zinc-900 px-8 py-4 flex justify-between items-center">
        <div class="left cursor-pointer text-xl text-yellow-100 bg-zinc-900 px-4 py-2 rounded shadow-md transition"
            onclick="window.scrollTo({ top: 0, behavior: 'smooth' });">
            Around the Net - BITS Goa
        </div>
        <div class="md:hidden">
            <button id="hamburger"
                class="text-yellow-100 bg-gray-500 px-4 py-2 rounded hover:bg-gray-700 transition">â˜°</button>
        </div>
        <ul id="navLinks"
            class="hidden flex-col absolute top-[70px] right-8 bg-zinc-600 px-6 py-4 rounded text-yellow-100 space-y-4 
             md:static md:flex md:flex-row md:space-x-4 md:space-y-0 md:bg-transparent md:p-0 md:rounded md:shadow-none">
            <li>
                <a href="/"
                    class="bg-transparent md:bg-gray-500 md:hover:bg-gray-700 text-yellow-100 px-4 py-2 rounded shadow-md transition">
                    Homepage
                </a>
            </li>
        </ul>
    </div>
    <div class="col-span-full flex items-center justify-center py-6">
        <div
            class="bg-yellow-100 text-yellow-800 px-6 py-3 rounded-lg shadow-md text-center text-lg font-semibold animate-pulse">
            âš¡ Auction on 15th November, 6PM
        </div>
    </div>

    <!-- <div class="w-full sm:w-[92%] lg:w-[96%] xl:w-[1000px] mx-auto mb-6">
        <label for="teamFilter" class="block text-white text-sm mb-2">Filter by Team:</label>
        <select id="teamFilter" class="w-full px-4 py-2 rounded-md bg-zinc-800 text-white border border-yellow-300">
            <option value="all">All Teams</option>
            <% const uniqueTeams=[...new Set(sortedPlayers.map(p=> p.teamName))];
                uniqueTeams.forEach(team => {
                %>
                <option value="<%= team %>">
                    <%= team %>
                </option>
                <% }) %>
        </select>
    </div>

    <div class="w-full overflow-x-auto">
        <table
            class="w-full sm:w-[92%] lg:w-[96%] xl:w-[1000px] mx-auto bg-zinc-900 rounded-xl shadow-2xl border border-yellow-300 text-base"
            id="auctionTable">
            <thead>
                <tr class="bg-yellow-700 text-base uppercase tracking-wider text-white">
                    <th class="px-4 py-4 text-center">Rank</th>
                    <th class="px-4 py-4 text-center">Name</th>
                    <th class="px-4 py-4 text-center">Price</th>
                    <th class="px-4 py-4 text-left">Team</th>
                </tr>
            </thead>
            <tbody class="divide-y divide-yellow-600">
                <% sortedPlayers.forEach((player, index)=> {
                    let rowClass = "";
                    let rankDisplay = index + 1;
                    if (index === 0) {
                    rowClass = "bg-yellow-500 text-black"; rankDisplay = "ðŸ¥‡";
                    } else if (index === 1) {
                    rowClass = "bg-gray-300 text-black"; rankDisplay = "ðŸ¥ˆ";
                    } else if (index === 2) {
                    rowClass = "bg-amber-700 text-white"; rankDisplay = "ðŸ¥‰";
                    }
                    else rowClass = "text-white";
                    %>
                    <tr class="<%= rowClass %>" data-team="<%= player.teamName %>">
                        <td class="px-4 py-3 text-center font-semibold">
                            <%= rankDisplay %>
                        </td>
                        <td class="px-4 py-3 text-center">
                            <%= player.name %>
                        </td>
                        <td class="px-4 py-3 text-center font-medium">
                            <%= player.price>= 1000000
                                ? (player.price / 1000000).toFixed(2).replace(/\.00$/, '') + 'M'
                                : (player.price / 1000).toFixed(0) + 'k' %>
                        </td>
                        <td class="px-4 py-3 font-semibold text-left whitespace-nowrap">
                            <div class="inline-flex items-center space-x-3">
                                <img src="<%= player.teamLogo %>" alt="Team Logo"
                                    class="w-7 h-7 rounded-full border border-yellow-300">
                                <span class="text-base">
                                    <%= player.teamName %>
                                </span>
                            </div>
                        </td>
                    </tr>
                    <% }) %>
            </tbody>
        </table>
    </div>

    <script>
        document.getElementById('teamFilter').addEventListener('change', function () {
            const selectedTeam = this.value;
            const rows = document.querySelectorAll('#auctionTable tbody tr');
            rows.forEach(row => {
                const team = row.getAttribute('data-team');
                row.style.display = (selectedTeam === 'all' || team === selectedTeam) ? '' : 'none';
            });
        });
    </script> -->

</body>

</html>